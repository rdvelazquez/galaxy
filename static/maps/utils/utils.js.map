{"version":3,"sources":["utils/utils.js"],"names":["iframe","deepeach","linkify","clone","isJSON","sanitize","isEmpty","textify","get","request","cssGetAttribute","cssLoadFile","merge","roundToDecimalPlaces","bytesToString","uid","time","appendScriptStyle","getQueryString","setWindowTitle","src","dict","callback","i","d","_","isObject","new_dict","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","replace","obj","JSON","parse","stringify","text","test","content","$","html","value","Array","length","undefined","indexOf","lst","isArray","toString","pos","lastIndexOf","substr","options","top","__utils__get__","cache_key","cache","success","window","console","debug","url","data","response","error","status","ajaxConfig","contentType","type","isEmptyObject","param","dataType","ajax","done","jQuery","parseJSON","e","fail","response_text","responseText","always","complete","classname","name","el","appendTo","css","remove","Galaxy","root","optionsDefault","defaults","number","numPlaces","placesMultiplier","Math","round","kb","mb","gb","tb","size","normal_font","numberPlaces","unit","rounded","__utils__uid__","Date","hours","getHours","minutes","getMinutes","getDate","getMonth","getFullYear","script","styles","key","decodeURIComponent","location","search","RegExp","encodeURIComponent","title","document","config","brand"],"mappings":"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","file":"../../scripts/utils/utils.js","sourcesContent":["/**\n * Galaxy utilities comprises small functions, which at this point\n * do not require their own classes/files\n */\nimport _l from \"utils/localization\";\n/** Builds a basic iframe */\nexport function iframe(src) {\n    return `<iframe src=\"${src}\" frameborder=\"0\" style=\"width: 100%; height: 100%;\"/>`;\n}\n\n/** Traverse through json */\nexport function deepeach(dict, callback) {\n    for (var i in dict) {\n        var d = dict[i];\n        if (_.isObject(d)) {\n            var new_dict = callback(d);\n            new_dict && (dict[i] = new_dict);\n            deepeach(d, callback);\n        }\n    }\n}\n\n/** Identifies urls and replaces them with anchors */\nexport function linkify(inputText) {\n    var replacedText;\n    var replacePattern1;\n    var replacePattern2;\n    var replacePattern3;\n\n    // URLs starting with http://, https://, or ftp://\n    replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n    replacedText = inputText.replace(replacePattern1, '<a href=\"$1\" target=\"_blank\">$1</a>');\n\n    // URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n    replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n    replacedText = replacedText.replace(replacePattern2, '$1<a href=\"http://$2\" target=\"_blank\">$2</a>');\n\n    // Change email addresses to mailto:: links.\n    replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n    replacedText = replacedText.replace(replacePattern3, '<a href=\"mailto:$1\">$1</a>');\n\n    return replacedText;\n}\n\n/** Clone */\nexport function clone(obj) {\n    return JSON.parse(JSON.stringify(obj) || null);\n}\n\n/**\n * Check if a string is a json string\n * @param{String}   text - Content to be validated\n */\nexport function isJSON(text) {\n    return /^[\\],:{}\\s]*$/.test(\n        text\n            .replace(/\\\\[\"\\\\\\/bfnrtu]/g, \"@\")\n            .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, \"]\")\n            .replace(/(?:^|:|,)(?:\\s*\\[)+/g, \"\")\n    );\n}\n\n/**\n * Sanitize/escape a string\n * @param{String}   content - Content to be sanitized\n */\nexport function sanitize(content) {\n    return $(\"<div/>\")\n        .text(content)\n        .html();\n}\n\n/**\n * Checks if a value or list of values is `empty`\n * usually used for selectable options\n * @param{String}   value - Value or list to be validated\n */\nexport function isEmpty(value) {\n    if (!(value instanceof Array)) {\n        value = [value];\n    }\n    if (value.length === 0) {\n        return true;\n    }\n    for (var i in value) {\n        if ([\"__null__\", \"__undefined__\", null, undefined].indexOf(value[i]) > -1) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * Convert list to pretty string\n * @param{String}   lst - List of strings to be converted in human readable list sentence\n */\nexport function textify(lst) {\n    if ($.isArray(lst)) {\n        lst = lst.toString().replace(/,/g, \", \");\n        var pos = lst.lastIndexOf(\", \");\n        if (pos != -1) {\n            lst = `${lst.substr(0, pos)} or ${lst.substr(pos + 2)}`;\n        }\n        return lst;\n    }\n    return \"\";\n}\n\n/**\n * Request handler for GET\n * @param{String}   url     - Url request is made to\n * @param{Function} success - Callback on success\n * @param{Function} error   - Callback on error\n * @param{Boolean}  cache   - Use cached data if available\n */\nexport function get(options) {\n    top.__utils__get__ = top.__utils__get__ || {};\n    var cache_key = JSON.stringify(options);\n    if (options.cache && top.__utils__get__[cache_key]) {\n        options.success && options.success(top.__utils__get__[cache_key]);\n        window.console.debug(`utils.js::get() - Fetching from cache [${options.url}].`);\n    } else {\n        request({\n            url: options.url,\n            data: options.data,\n            success: function(response) {\n                top.__utils__get__[cache_key] = response;\n                options.success && options.success(response);\n            },\n            error: function(response, status) {\n                options.error && options.error(response, status);\n            }\n        });\n    }\n}\n\n/**\n * Request handler\n * @param{String}   method  - Request method ['GET', 'POST', 'DELETE', 'PUT']\n * @param{String}   url     - Url request is made to\n * @param{Object}   data    - Data send to url\n * @param{Function} success - Callback on success\n * @param{Function} error   - Callback on error\n */\nexport function request(options) {\n    // prepare ajax\n    var ajaxConfig = {\n        contentType: \"application/json\",\n        type: options.type || \"GET\",\n        data: options.data || {},\n        url: options.url\n    };\n    // encode data into url\n    if (ajaxConfig.type == \"GET\" || ajaxConfig.type == \"DELETE\") {\n        if (!$.isEmptyObject(ajaxConfig.data)) {\n            ajaxConfig.url += ajaxConfig.url.indexOf(\"?\") == -1 ? \"?\" : \"&\";\n            ajaxConfig.url += $.param(ajaxConfig.data, true);\n        }\n        ajaxConfig.data = null;\n    } else {\n        ajaxConfig.dataType = \"json\";\n        ajaxConfig.url = ajaxConfig.url;\n        ajaxConfig.data = JSON.stringify(ajaxConfig.data);\n    }\n\n    // make request\n    $.ajax(ajaxConfig)\n        .done(response => {\n            if (typeof response === \"string\") {\n                try {\n                    response = response.replace(\"Infinity,\", '\"Infinity\",');\n                    response = jQuery.parseJSON(response);\n                } catch (e) {\n                    console.debug(e);\n                }\n            }\n            options.success && options.success(response);\n        })\n        .fail(response => {\n            var response_text = null;\n            try {\n                response_text = jQuery.parseJSON(response.responseText);\n            } catch (e) {\n                response_text = response.responseText;\n            }\n            options.error && options.error(response_text, response.status);\n        })\n        .always(() => {\n            options.complete && options.complete();\n        });\n}\n\n/**\n * Read a property value from CSS\n * @param{String}   classname   - CSS class\n * @param{String}   name        - CSS property\n */\nexport function cssGetAttribute(classname, name) {\n    var el = $(`<div class=\"${classname}\"></div>`);\n    el.appendTo(\":eq(0)\");\n    var value = el.css(name);\n    el.remove();\n    return value;\n}\n\n/**\n * Load a CSS file\n * @param{String}   url - Url of CSS file\n */\nexport function cssLoadFile(url) {\n    if (!$(`link[href^=\"${url}\"]`).length) {\n        $(`<link href=\"${Galaxy.root}${url}\" rel=\"stylesheet\">`).appendTo(\"head\");\n    }\n}\n\n/**\n * Safely merge to dictionaries\n * @param{Object}   options         - Target dictionary\n * @param{Object}   optionsDefault  - Source dictionary\n */\nexport function merge(options, optionsDefault) {\n    if (options) {\n        return _.defaults(options, optionsDefault);\n    } else {\n        return optionsDefault;\n    }\n}\n\n/**\n * Round floaing point 'number' to 'numPlaces' number of decimal places.\n * @param{Object}   number      a floaing point number\n * @param{Object}   numPlaces   number of decimal places\n */\nexport function roundToDecimalPlaces(number, numPlaces) {\n    var placesMultiplier = 1;\n    for (var i = 0; i < numPlaces; i++) {\n        placesMultiplier *= 10;\n    }\n    return Math.round(number * placesMultiplier) / placesMultiplier;\n}\n\n// calculate on import\nvar kb = 1024;\n\nvar mb = kb * kb;\nvar gb = mb * kb;\nvar tb = gb * kb;\n/**\n * Format byte size to string with units\n * @param{Integer}   size           - Size in bytes\n * @param{Boolean}   normal_font    - Switches font between normal and bold\n */\nexport function bytesToString(size, normal_font, numberPlaces) {\n    numberPlaces = numberPlaces !== undefined ? numberPlaces : 1;\n    // identify unit\n    var unit = \"\";\n    if (size >= tb) {\n        size = size / tb;\n        unit = \"TB\";\n    } else if (size >= gb) {\n        size = size / gb;\n        unit = \"GB\";\n    } else if (size >= mb) {\n        size = size / mb;\n        unit = \"MB\";\n    } else if (size >= kb) {\n        size = size / kb;\n        unit = \"KB\";\n    } else if (size > 0) {\n        unit = \"b\";\n    } else {\n        return normal_font ? \"0 b\" : \"<strong>-</strong>\";\n    }\n    // return formatted string\n    var rounded = unit == \"b\" ? size : roundToDecimalPlaces(size, numberPlaces);\n    if (normal_font) {\n        return `${rounded} ${unit}`;\n    } else {\n        return `<strong>${rounded}</strong> ${unit}`;\n    }\n}\n\n/** Create a unique id */\nexport function uid() {\n    top.__utils__uid__ = top.__utils__uid__ || 0;\n    return `uid-${top.__utils__uid__++}`;\n}\n\n/** Create a time stamp */\nexport function time() {\n    var d = new Date();\n    var hours = (d.getHours() < 10 ? \"0\" : \"\") + d.getHours();\n    var minutes = (d.getMinutes() < 10 ? \"0\" : \"\") + d.getMinutes();\n    return `${d.getDate()}/${d.getMonth() + 1}/${d.getFullYear()}, ${hours}:${minutes}`;\n}\n\n/** Append script and style tags to Galaxy main application */\nexport function appendScriptStyle(data) {\n    // create a script tag inside head tag\n    if (data.script && data.script !== \"\") {\n        $(\"<script/>\", { type: \"text/javascript\" })\n            .text(data.script)\n            .appendTo(\"head\");\n    }\n    // create a style tag inside head tag\n    if (data.styles && data.styles !== \"\") {\n        $(\"<style/>\", { type: \"text/css\" })\n            .text(data.styles)\n            .appendTo(\"head\");\n    }\n}\n\n/** Get querystrings from url */\nexport function getQueryString(key) {\n    return decodeURIComponent(\n        window.location.search.replace(\n            new RegExp(`^(?:.*[&\\\\?]${encodeURIComponent(key).replace(/[\\.\\+\\*]/g, \"\\\\$&\")}(?:\\\\=([^&]*))?)?.*$`, \"i\"),\n            \"$1\"\n        )\n    );\n}\n\nexport function setWindowTitle(title) {\n    if (title) {\n        window.document.title = `Galaxy ${window.Galaxy.config.brand ? ` | ${window.Galaxy.config.brand}` : \"\"} | ${_l(\n            title\n        )}`;\n    } else {\n        window.document.title = `Galaxy ${window.Galaxy.config.brand ? ` | ${window.Galaxy.config.brand}` : \"\"}`;\n    }\n}\n\nexport default {\n    cssLoadFile: cssLoadFile,\n    cssGetAttribute: cssGetAttribute,\n    get: get,\n    merge: merge,\n    iframe: iframe,\n    bytesToString: bytesToString,\n    uid: uid,\n    time: time,\n    request: request,\n    sanitize: sanitize,\n    textify: textify,\n    isEmpty: isEmpty,\n    deepeach: deepeach,\n    isJSON: isJSON,\n    clone: clone,\n    linkify: linkify,\n    appendScriptStyle: appendScriptStyle,\n    getQueryString: getQueryString,\n    setWindowTitle: setWindowTitle\n};\n"]}