{"version":3,"sources":["mvc/history/hdca-li-edit.js"],"names":["_super","HDCAListItemView","HDCAListItemEdit","extend","initialize","attributes","prototype","call","purgeAllowed","_getFoldoutPanelClass","CollectionViewEdit","_renderPrimaryActions","log","concat","_renderDeleteButton","$","events","_","clone","ev","model","toString","modelString"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAKA;AACA,QAAIA,SAAS,iBAAQC,gBAArB;AACA;;AAEA,QAAIC,mBAAmBF,OAAOG,MAAP;AACnB,4CAAyC;AACrC;AACA;AACA;AACAC,oBAAY,oBAASC,UAAT,EAAqB;AAC7BL,mBAAOM,SAAP,CAAiBF,UAAjB,CAA4BG,IAA5B,CAAiC,IAAjC,EAAuCF,UAAvC;;AAEA;AACA,iBAAKG,YAAL,GAAoBH,WAAWG,YAAX,IAA2B,KAA/C;AACH,SAToC;;AAWrC;AACAC,+BAAuB,iCAAW;AAC9B,mBAAO,6BAAaC,kBAApB;AACH,SAdoC;;AAgBrC;AACA;AACAC,+BAAuB,iCAAW;AAC9B,iBAAKC,GAAL,CAAY,IAAZ;AACA;AACA,mBAAOZ,OAAOM,SAAP,CAAiBK,qBAAjB,CAAuCJ,IAAvC,CAA4C,IAA5C,EAAkDM,MAAlD,CAAyD,CAAC,KAAKC,mBAAL,EAAD,CAAzD,CAAP;AACH,SAtBoC;;AAwBrCA,6BAAqB,+BAAW;AAC5B,mBAAOC,gHAEyC,4BAAG,QAAH,CAFzC,8UAQe,4BAAG,iBAAH,CARf,8NAae,4BAAG,iBAAH,CAbf,yHAgB2B,KAAKP,YAAL,GAAoB,SAApB,GAAgC,MAhB3D,yIAkBe,4BAAG,6BAAH,CAlBf,0HAAP;AAuBH,SAhDoC;;AAkDrC;AACAQ,gBAAQC,EAAEd,MAAF,CAASc,EAAEC,KAAF,CAAQlB,OAAOM,SAAP,CAAiBU,MAAzB,CAAT,EAA2C;AAC/C,wCAA4B,+BAASG,EAAT,EAAa;AACrC,qBAAKC,KAAL,CAAW,QAAX;AACH,aAH8C;AAI/C,qDAAyC,0CAASD,EAAT,EAAa;AAClD,qBAAKC,KAAL,CAAW,QAAX,EAAqB,IAArB;AACH,aAN8C;AAO/C,2DAA+C,+CAASD,EAAT,EAAa;AACxD,qBAAKC,KAAL,CAAW,QAAX,EAAqB,IAArB,EAA2B,IAA3B;AACH;AAT8C,SAA3C,CAnD6B;;AA+DrC;AACA;AACAC,kBAAU,oBAAW;AACjB,gBAAIC,cAAc,KAAKF,KAAL,QAAgB,KAAKA,KAArB,GAA+B,YAAjD;AACA,yCAA2BE,WAA3B;AACH;AApEoC,KADtB,CAAvB;;AAyEA;sBACe;AACXpB,0BAAkBA;AADP,K","file":"../../../scripts/mvc/history/hdca-li-edit.js","sourcesContent":["import HDCA_LI from \"mvc/history/hdca-li\";\nimport DC_VIEW_EDIT from \"mvc/collection/collection-view-edit\";\nimport faIconButton from \"ui/fa-icon-button\";\nimport _l from \"utils/localization\";\n\n//==============================================================================\nvar _super = HDCA_LI.HDCAListItemView;\n/** @class Editing view for HistoryDatasetCollectionAssociation.\n */\nvar HDCAListItemEdit = _super.extend(\n    /** @lends HDCAListItemEdit.prototype */ {\n        /** logger used to record this.log messages, commonly set to console */\n        //logger              : console,\n        /** set up: options */\n        initialize: function(attributes) {\n            _super.prototype.initialize.call(this, attributes);\n\n            /** allow user purge of dataset files? */\n            this.purgeAllowed = attributes.purgeAllowed || false;\n        },\n\n        /** Override to return editable versions of the collection panels */\n        _getFoldoutPanelClass: function() {\n            return DC_VIEW_EDIT.CollectionViewEdit;\n        },\n\n        // ......................................................................... delete\n        /** In this override, add the delete button. */\n        _renderPrimaryActions: function() {\n            this.log(`${this}._renderPrimaryActions`);\n            // render the display, edit attr and delete icon-buttons\n            return _super.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()]);\n        },\n\n        _renderDeleteButton: function() {\n            return $(`\n                <div class=\"dropdown\">\n                    <a class=\"delete-btn icon-btn\" title=\"${_l(\"Delete\")}\" data-toggle=\"dropdown\">\n                        <span class=\"fa fa-times\"></span>\n                    </a>\n                    <ul class=\"dropdown-menu pull-right\" role=\"menu\">\n                        <li>\n                            <a href=\"#\" class=\"delete-collection\">\n                                ${_l(\"Collection Only\")}\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"#\" class=\"delete-collection-and-datasets\">\n                                ${_l(\"Delete Datasets\")}\n                            </a>\n                        </li>\n                        <li style=\"display: ${this.purgeAllowed ? \"inherit\" : \"none\"}\">\n                            <a href=\"#\" class=\"delete-collection-and-purge-datasets\">\n                                ${_l(\"Permanently Delete Datasets\")}\n                            </a>\n                        </li>\n                    </ul>\n                </div>`);\n        },\n\n        // ......................................................................... misc\n        events: _.extend(_.clone(_super.prototype.events), {\n            \"click .delete-collection\": function(ev) {\n                this.model[\"delete\"]();\n            },\n            \"click .delete-collection-and-datasets\": function(ev) {\n                this.model[\"delete\"](true);\n            },\n            \"click .delete-collection-and-purge-datasets\": function(ev) {\n                this.model[\"delete\"](true, true);\n            }\n        }),\n\n        // ......................................................................... misc\n        /** string rep */\n        toString: function() {\n            var modelString = this.model ? `${this.model}` : \"(no model)\";\n            return `HDCAListItemEdit(${modelString})`;\n        }\n    }\n);\n\n//==============================================================================\nexport default {\n    HDCAListItemEdit: HDCAListItemEdit\n};\n"]}