{"version":3,"sources":["mvc/toolshed/toolshed-model.js"],"names":["ToolShedModel","Backbone","Model","extend","defaults","url","name","urlRoot","Galaxy","root","ToolShedsCollection","Collection","model","ToolShedCategoriesModel","ToolShedCategoriesCollection","ToolShedCategoryModel","ToolShedCategoryCollection","ToolShedRepositoryModel","ToolShedRepositoryCollection","RepoQueueModel","RepoQueueCollection","fetch","collection","repositories","Array","repositories_enc","JSON","parse","localStorage","queue_keys","Object","keys","_","each","repo","key","queue_key","push","reset","prototype","call","RepoStatusModel","RepoStatusCollection","WorkflowToolsModel","WorkflowToolsCollection","ShedModel","ShedsCollection","Category","Categories","CategoryModel","CategoryCollection","RepositoryModel","RepositoryCollection","RepoQueue","RepoStatus","WorkflowTools"],"mappings":"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","file":"../../../scripts/mvc/toolshed/toolshed-model.js","sourcesContent":["var ToolShedModel = Backbone.Model.extend({\n    defaults: {\n        url: \"https://toolshed.g2.bx.psu.edu/\",\n        name: \"Galaxy Main Tool Shed\"\n    },\n    urlRoot: `${Galaxy.root}api/tool_shed`\n});\n\nvar ToolShedsCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed`,\n    model: ToolShedModel\n});\n\nvar ToolShedCategoriesModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/contents`\n});\n\nvar ToolShedCategoriesCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/contents`,\n    model: ToolShedCategoriesModel\n});\n\nvar ToolShedCategoryModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/category`\n});\n\nvar ToolShedCategoryCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/category`,\n    model: ToolShedCategoryModel\n});\n\nvar ToolShedRepositoryModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/repository`\n});\n\nvar ToolShedRepositoryCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/repository`,\n    model: ToolShedRepositoryModel\n});\n\nvar RepoQueueModel = Backbone.Model.extend({\n    url: \"#\"\n});\n\nvar RepoQueueCollection = Backbone.Collection.extend({\n    url: \"#\",\n    model: RepoQueueModel,\n    fetch: function() {\n        var collection = this;\n        var repositories = Array();\n        var repositories_enc = JSON.parse(localStorage.repositories);\n        var queue_keys = Object.keys(repositories_enc);\n        _.each(queue_keys, key => {\n            var repo = repositories_enc[key];\n            repo.queue_key = key;\n            repositories.push(repo);\n        });\n        collection.reset(repositories);\n        return Backbone.Collection.prototype.fetch.call(this);\n    }\n});\n\nvar RepoStatusModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/tool_shed/status`\n});\n\nvar RepoStatusCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/tool_shed/status`,\n    model: RepoStatusModel\n});\n\nvar WorkflowToolsModel = Backbone.Model.extend({\n    defaults: [{}],\n    urlRoot: `${Galaxy.root}api/workflows?missing_tools=True`\n});\n\nvar WorkflowToolsCollection = Backbone.Collection.extend({\n    url: `${Galaxy.root}api/workflows?missing_tools=True`,\n    model: WorkflowToolsModel\n});\n\nexport default {\n    ShedModel: ToolShedModel,\n    ShedsCollection: ToolShedsCollection,\n    Category: ToolShedCategoriesModel,\n    Categories: ToolShedCategoriesCollection,\n    CategoryModel: ToolShedCategoryModel,\n    CategoryCollection: ToolShedCategoryCollection,\n    RepositoryModel: ToolShedRepositoryModel,\n    RepositoryCollection: ToolShedRepositoryCollection,\n    RepoQueue: RepoQueueCollection,\n    RepoStatus: RepoStatusCollection,\n    WorkflowTools: WorkflowToolsCollection\n};\n"]}