{"version":3,"sources":["mvc/library/library-libraryrow-view.js"],"names":["LibraryRowView","Backbone","View","extend","events","edit_mode","element_visibility_config","upload_library_btn","edit_library_btn","permission_library_btn","save_library_btn","cancel_library_btn","delete_library_btn","undelete_library_btn","initialize","library","render","Galaxy","libraries","libraryListView","collection","get","$el","data","prepareButtons","tmpl","templateRow","setElement","button_config","show","repaint","$","hide","old_element","replaceWith","find","tooltip","vis_config","edit_button_clicked","cancel_library_modification","save_library_modification","is_changed","new_name","val","length","set","warning","new_description","new_synopsis","row_view","save","patch","success","error","model","response","responseJSON","err_msg","info","delete_library","destroy","add","preferences","remove","undelete_library","url","urlRoot","id","_","template","join"],"mappings":"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","file":"../../../scripts/mvc/library/library-libraryrow-view.js","sourcesContent":["// dependencies\nimport mod_toastr from \"libs/toastr\";\n// galaxy library row view\nvar LibraryRowView = Backbone.View.extend({\n    events: {\n        \"click .edit_library_btn\": \"edit_button_clicked\",\n        \"click .cancel_library_btn\": \"cancel_library_modification\",\n        \"click .save_library_btn\": \"save_library_modification\",\n        \"click .delete_library_btn\": \"delete_library\",\n        \"click .undelete_library_btn\": \"undelete_library\"\n    },\n\n    edit_mode: false,\n\n    element_visibility_config: {\n        upload_library_btn: false,\n        edit_library_btn: false,\n        permission_library_btn: false,\n        save_library_btn: false,\n        cancel_library_btn: false,\n        delete_library_btn: false,\n        undelete_library_btn: false\n    },\n\n    initialize: function(library) {\n        this.render(library);\n    },\n\n    render: function(library) {\n        if (typeof library === \"undefined\") {\n            library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        }\n        this.prepareButtons(library);\n        var tmpl = this.templateRow();\n        this.setElement(\n            tmpl({\n                library: library,\n                button_config: this.element_visibility_config,\n                edit_mode: this.edit_mode\n            })\n        );\n        this.$el.show();\n        return this;\n    },\n\n    repaint: function(library) {\n        /* need to hide manually because of the element removal in setElement\n    invoked in render() */\n        $(\".tooltip\").hide();\n        /* we need to store the old element to be able to replace it with\n    new one */\n        var old_element = this.$el;\n        /* if user canceled the library param is undefined,\n      if user saved and succeeded the updated library is rendered */\n        this.render();\n        old_element.replaceWith(this.$el);\n        /* now we attach new tooltips to the newly created row element */\n        this.$el.find(\"[data-toggle]\").tooltip();\n    },\n\n    /**\n     * Function modifies the visibility of buttons for\n     * the filling of the row template of given library.\n     */\n    prepareButtons: function(library) {\n        var vis_config = this.element_visibility_config;\n\n        if (this.edit_mode === false) {\n            vis_config.save_library_btn = false;\n            vis_config.cancel_library_btn = false;\n            vis_config.delete_library_btn = false;\n            if (library.get(\"deleted\") === true) {\n                vis_config.undelete_library_btn = true;\n                vis_config.upload_library_btn = false;\n                vis_config.edit_library_btn = false;\n                vis_config.permission_library_btn = false;\n            } else if (library.get(\"deleted\") === false) {\n                vis_config.save_library_btn = false;\n                vis_config.cancel_library_btn = false;\n                vis_config.undelete_library_btn = false;\n                if (library.get(\"can_user_add\") === true) {\n                    vis_config.upload_library_btn = true;\n                }\n                if (library.get(\"can_user_modify\") === true) {\n                    vis_config.edit_library_btn = true;\n                }\n                if (library.get(\"can_user_manage\") === true) {\n                    vis_config.permission_library_btn = true;\n                }\n            }\n        } else if (this.edit_mode === true) {\n            vis_config.upload_library_btn = false;\n            vis_config.edit_library_btn = false;\n            vis_config.permission_library_btn = false;\n            vis_config.save_library_btn = true;\n            vis_config.cancel_library_btn = true;\n            vis_config.delete_library_btn = true;\n            vis_config.undelete_library_btn = false;\n        }\n\n        this.element_visibility_config = vis_config;\n    },\n\n    /* User clicked the 'edit' button on row so we render a new row\n    that allows editing */\n    edit_button_clicked: function() {\n        this.edit_mode = true;\n        this.repaint();\n    },\n\n    /* User clicked the 'cancel' button so we render normal rowView */\n    cancel_library_modification: function() {\n        // mod_toastr.info('Modifications canceled');\n        this.edit_mode = false;\n        this.repaint();\n    },\n\n    save_library_modification: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var is_changed = false;\n\n        var new_name = this.$el.find(\".input_library_name\").val();\n        if (typeof new_name !== \"undefined\" && new_name !== library.get(\"name\")) {\n            if (new_name.length > 2) {\n                library.set(\"name\", new_name);\n                is_changed = true;\n            } else {\n                mod_toastr.warning(\"Library name has to be at least 3 characters long.\");\n                return;\n            }\n        }\n\n        var new_description = this.$el.find(\".input_library_description\").val();\n        if (typeof new_description !== \"undefined\" && new_description !== library.get(\"description\")) {\n            library.set(\"description\", new_description);\n            is_changed = true;\n        }\n\n        var new_synopsis = this.$el.find(\".input_library_synopsis\").val();\n        if (typeof new_synopsis !== \"undefined\" && new_synopsis !== library.get(\"synopsis\")) {\n            library.set(\"synopsis\", new_synopsis);\n            is_changed = true;\n        }\n\n        if (is_changed) {\n            var row_view = this;\n            library.save(null, {\n                patch: true,\n                success: function(library) {\n                    row_view.edit_mode = false;\n                    row_view.repaint(library);\n                    mod_toastr.success(\"Changes to library saved.\");\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(response.responseJSON.err_msg);\n                    } else {\n                        mod_toastr.error(\"An error occured while attempting to update the library.\");\n                    }\n                }\n            });\n        } else {\n            this.edit_mode = false;\n            this.repaint(library);\n            mod_toastr.info(\"Nothing has changed.\");\n        }\n    },\n\n    delete_library: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var row_view = this;\n        // mark the library deleted\n        library.destroy({\n            success: function(library) {\n                library.set(\"deleted\", true);\n                // add the new deleted library back to the collection (Galaxy specialty)\n                Galaxy.libraries.libraryListView.collection.add(library);\n                row_view.edit_mode = false;\n                if (Galaxy.libraries.preferences.get(\"with_deleted\") === false) {\n                    $(\".tooltip\").hide();\n                    row_view.repaint(library);\n                    row_view.$el.remove();\n                } else if (Galaxy.libraries.preferences.get(\"with_deleted\") === true) {\n                    row_view.repaint(library);\n                }\n                mod_toastr.success(\"Library has been marked deleted.\");\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occured during deleting the library.\");\n                }\n            }\n        });\n    },\n\n    undelete_library: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var row_view = this;\n\n        // mark the library undeleted\n        library.url = `${library.urlRoot + library.id}?undelete=true`;\n        library.destroy({\n            success: function(library) {\n                // add the newly undeleted library back to the collection\n                // backbone does not accept changes through destroy, so update it too\n                library.set(\"deleted\", false);\n                Galaxy.libraries.libraryListView.collection.add(library);\n                row_view.edit_mode = false;\n                row_view.repaint(library);\n                mod_toastr.success(\"Library has been undeleted.\");\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occured while undeleting the library.\");\n                }\n            }\n        });\n    },\n\n    templateRow: function() {\n        return _.template(\n            [\n                '<tr class=\"<% if(library.get(\"deleted\") === true) { print(\"active\") } %>\" style=\"display:none;\" data-id=\"<%- library.get(\"id\") %>\">',\n                \"<% if(!edit_mode) { %>\",\n                '<% if(library.get(\"deleted\")) { %>',\n                '<td style=\"color:grey;\"><%- library.get(\"name\") %></td>',\n                \"<% } else { %>\",\n                '<td><a href=\"#folders/<%- library.get(\"root_folder_id\") %>\"><%- library.get(\"name\") %></a></td>',\n                \"<% } %>\",\n                '<% if(library.get(\"description\")) { %>',\n                '<% if( (library.get(\"description\")).length> 80 ) { %>',\n                '<td data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%= _.escape(library.get(\"description\")) %>\"><%= _.escape(library.get(\"description\")).substring(0, 80) + \"...\" %></td>',\n                \"<% } else { %>\",\n                '<td><%= _.escape(library.get(\"description\"))%></td>',\n                \"<% } %>\",\n                \"<% } else { %>\",\n                \"<td></td>\",\n                \"<% } %>\",\n                '<% if(library.get(\"synopsis\")) { %>',\n                '<% if( (library.get(\"synopsis\")).length> 120 ) { %>',\n                '<td data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%= _.escape(library.get(\"synopsis\")) %>\"><%= _.escape(library.get(\"synopsis\")).substring(0, 120) + \"...\" %></td>',\n                \"<% } else { %>\",\n                '<td><%= _.escape(library.get(\"synopsis\"))%></td>',\n                \"<% } %>\",\n                \"<% } else { %>\",\n                \"<td></td>\",\n                \"<% } %>\",\n                \"<% } else if(edit_mode){ %>\",\n                '<td><textarea rows=\"4\" class=\"form-control input_library_name\" placeholder=\"name\" ><%- library.get(\"name\") %></textarea></td>',\n                '<td><textarea rows=\"4\" class=\"form-control input_library_description\" placeholder=\"description\" ><%- library.get(\"description\") %></textarea></td>',\n                '<td><textarea rows=\"4\" class=\"form-control input_library_synopsis\" placeholder=\"synopsis\" ><%- library.get(\"synopsis\") %></textarea></td>',\n                \"<% } %>\",\n                '<td class=\"right-center\">',\n                '<% if( (library.get(\"public\")) && (library.get(\"deleted\") === false) ) { %>',\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Unrestricted library\" style=\"color:grey;\" class=\"fa fa-globe fa-lg\"> </span>',\n                \"<% }%>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Modify \\'<%- library.get(\"name\") %>\\'\" class=\"primary-button btn-xs edit_library_btn\" type=\"button\" style=\"<% if(button_config.edit_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-pencil\"></span> Edit</button>',\n                '<a href=\"#library/<%- library.get(\"id\") %>/permissions\"><button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Permissions of \\'<%- library.get(\"name\") %>\\'\" class=\"primary-button btn-xs permission_library_btn\" type=\"button\" style=\"<% if(button_config.permission_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-group\"></span> Manage</button></a>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Save changes\" class=\"primary-button btn-xs save_library_btn\" type=\"button\" style=\"<% if(button_config.save_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-floppy-o\"></span> Save</button>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Discard changes\" class=\"primary-button btn-xs cancel_library_btn\" type=\"button\" style=\"<% if(button_config.cancel_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-times\"></span> Cancel</button>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Delete \\'<%- library.get(\"name\") %>\\'\" class=\"primary-button btn-xs delete_library_btn\" type=\"button\" style=\"<% if(button_config.delete_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-trash-o\"></span> Delete</button>',\n                // For deleted libraries\n                '<span data-toggle=\"tooltip\" data-placement=\"top\" title=\"Marked deleted\" style=\"color:grey; <% if(button_config.undelete_library_btn === false) { print(\"display:none;\") } %>\" class=\"fa fa-ban fa-lg\"></span>',\n                '<button data-toggle=\"tooltip\" data-placement=\"top\" title=\"Undelete \\'<%- library.get(\"name\") %>\\' \" class=\"primary-button btn-xs undelete_library_btn\" type=\"button\" style=\"<% if(button_config.undelete_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-unlock\"></span> Undelete</button>',\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    }\n});\n\nexport default {\n    LibraryRowView: LibraryRowView\n};\n"]}