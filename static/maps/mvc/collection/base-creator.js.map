{"version":3,"sources":["mvc/collection/base-creator.js"],"names":["CollectionCreatorMixin","_validationWarning","what","clear","VALIDATION_CLASS","$","add","focus","select","removeClass","addClass","_changeHideOriginals","ev","hideOriginals","prop","_changeName","_getName","_nameCheckForEnter","keyCode","blocking","_clickCreate","_","escape","val","_clickMoreHelp","stopPropagation","hide","_clickLessHelp","show","_toggleHelp","toggleClass","toggle","_showAlert","message","alertClass","attr","find","html","_hideAlert","_cancelCreate","oncancel","call","name","createList","_setUpCommonSettings","attributes","defaultHideSourceItems","_renderFooter","speed","callback","self","$footer","empty","templates","footer","each","footerSettings","property","selector","_creatorTemplates","main","template","join"],"mappings":"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","file":"../../../scripts/mvc/collection/base-creator.js","sourcesContent":["/* For presentation-related functionality shared across collection creators.\n   Particularily overlapping functionality related to name processing and help.\n*/\nvar CollectionCreatorMixin = {\n    /** add (or clear if clear is truthy) a validation warning to the DOM element described in what */\n    _validationWarning: function(what, clear) {\n        var VALIDATION_CLASS = \"validation-warning\";\n        if (what === \"name\") {\n            what = this.$(\".collection-name\").add(this.$(\".collection-name-prompt\"));\n            this.$(\".collection-name\")\n                .focus()\n                .select();\n        }\n        if (clear) {\n            what = what || this.$(`.${VALIDATION_CLASS}`);\n            what.removeClass(VALIDATION_CLASS);\n        } else {\n            what.addClass(VALIDATION_CLASS);\n        }\n    },\n\n    _changeHideOriginals: function(ev) {\n        this.hideOriginals = this.$(\".hide-originals\").prop(\"checked\");\n    },\n\n    // ........................................................................ footer\n    /** handle a collection name change */\n    _changeName: function(ev) {\n        this._validationWarning(\"name\", !!this._getName());\n    },\n\n    /** check for enter key press when in the collection name and submit */\n    _nameCheckForEnter: function(ev) {\n        if (ev.keyCode === 13 && !this.blocking) {\n            this._clickCreate();\n        }\n    },\n\n    /** get the current collection name */\n    _getName: function() {\n        return _.escape(this.$(\".collection-name\").val());\n    },\n\n    // ........................................................................ header\n    /** expand help */\n    _clickMoreHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").addClass(\"expanded\");\n        this.$(\".more-help\").hide();\n    },\n    /** collapse help */\n    _clickLessHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").removeClass(\"expanded\");\n        this.$(\".more-help\").show();\n    },\n    /** toggle help */\n    _toggleHelp: function(ev) {\n        ev.stopPropagation();\n        this.$(\".main-help\").toggleClass(\"expanded\");\n        this.$(\".more-help\").toggle();\n    },\n\n    /** show an alert on the top of the interface containing message (alertClass is bootstrap's alert-*) */\n    _showAlert: function(message, alertClass) {\n        alertClass = alertClass || \"alert-danger\";\n        this.$(\".main-help\").hide();\n        this.$(\".header .alert\")\n            .attr(\"class\", \"alert alert-dismissable\")\n            .addClass(alertClass)\n            .show()\n            .find(\".alert-message\")\n            .html(message);\n    },\n    /** hide the alerts at the top */\n    _hideAlert: function(message) {\n        this.$(\".main-help\").show();\n        this.$(\".header .alert\").hide();\n    },\n\n    _cancelCreate: function(ev) {\n        if (typeof this.oncancel === \"function\") {\n            this.oncancel.call(this);\n        }\n    },\n\n    /** attempt to create the current collection */\n    _clickCreate: function(ev) {\n        var name = this._getName();\n        if (!name) {\n            this._validationWarning(\"name\");\n        } else if (!this.blocking) {\n            this.createList(name);\n        }\n    },\n\n    _setUpCommonSettings: function(attributes) {\n        this.hideOriginals = attributes.defaultHideSourceItems || false;\n    },\n\n    /** render the footer, completion controls, and cancel controls */\n    _renderFooter: function(speed, callback) {\n        var self = this;\n        var $footer = this.$(\".footer\")\n            .empty()\n            .html(this.templates.footer());\n        _.each(this.footerSettings, (property, selector) => {\n            self.$(selector).prop(\"checked\", self[property]);\n        });\n        if (typeof this.oncancel === \"function\") {\n            this.$(\".cancel-create.btn\").show();\n        }\n        return $footer;\n    },\n\n    _creatorTemplates: {\n        main: _.template(\n            [\n                '<div class=\"header flex-row no-flex\"></div>',\n                '<div class=\"middle flex-row flex-row-container\"></div>',\n                '<div class=\"footer flex-row no-flex\"></div>'\n            ].join(\"\")\n        )\n    }\n};\n\n//==============================================================================\nexport default {\n    CollectionCreatorMixin: CollectionCreatorMixin\n};\n"]}