{"version":3,"sources":["mvc/ui/ui-select-ftp.js"],"names":["View","Backbone","extend","initialize","options","self","ftpfile_list","name","optional","multiple","onchange","value","setElement","$el","get","url","Galaxy","root","success","response","data","i","push","label","update","val"],"mappings":";;;;;;;;;;;;;;;;;AAGA;;;AAHA;AAMA,QAAIA,OAAOC,SAASD,IAAT,CAAcE,MAAd,CAAqB;AAC5B;AACAC,oBAAY,oBAASC,OAAT,EAAkB;AAC1B;AACA,gBAAIC,OAAO,IAAX;;AAEA;AACA,iBAAKC,YAAL,GAAoB,IAAI,iBAAKN,IAAT,CAAc;AAC9BO,sBAAM,MADwB;AAE9BC,0BAAUJ,QAAQI,QAFY;AAG9BC,0BAAUL,QAAQK,QAHY;AAI9BC,0BAAU,oBAAW;AACjBN,4BAAQM,QAAR,IAAoBN,QAAQM,QAAR,CAAiBL,KAAKM,KAAL,EAAjB,CAApB;AACH;AAN6B,aAAd,CAApB;;AASA;AACA,iBAAKC,UAAL,CAAgB,KAAKN,YAAL,CAAkBO,GAAlC;;AAEA;AACA,4BAAMC,GAAN,CAAU;AACNC,qBAAQC,OAAOC,IAAf,qBADM;AAENC,yBAAS,iBAASC,QAAT,EAAmB;AACxB,wBAAIC,OAAO,EAAX;AACA,yBAAK,IAAIC,CAAT,IAAcF,QAAd,EAAwB;AACpBC,6BAAKE,IAAL,CAAU;AACNX,mCAAOQ,SAASE,CAAT,EAAY,MAAZ,CADD;AAENE,mCAAOJ,SAASE,CAAT,EAAY,MAAZ;AAFD,yBAAV;AAIH;AACDhB,yBAAKC,YAAL,CAAkBkB,MAAlB,CAAyBJ,IAAzB;AACH;AAXK,aAAV;AAaH,SAjC2B;;AAmC5B;AACAT,eAAO,eAASc,GAAT,EAAc;AACjB,mBAAO,KAAKnB,YAAL,CAAkBK,KAAlB,CAAwBc,GAAxB,CAAP;AACH;AAtC2B,KAArB,CAAX;;sBAyCe;AACXzB,cAAMA;AADK,K","file":"../../../scripts/mvc/ui/ui-select-ftp.js","sourcesContent":["// dependencies\nimport Utils from \"utils/utils\";\nimport List from \"mvc/ui/ui-list\";\n/**\n * FTP file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize: function(options) {\n        // link this\n        var self = this;\n\n        // create ui-list view to keep track of selected ftp files\n        this.ftpfile_list = new List.View({\n            name: \"file\",\n            optional: options.optional,\n            multiple: options.multiple,\n            onchange: function() {\n                options.onchange && options.onchange(self.value());\n            }\n        });\n\n        // create elements\n        this.setElement(this.ftpfile_list.$el);\n\n        // initial fetch of ftps\n        Utils.get({\n            url: `${Galaxy.root}api/remote_files`,\n            success: function(response) {\n                var data = [];\n                for (var i in response) {\n                    data.push({\n                        value: response[i][\"path\"],\n                        label: response[i][\"path\"]\n                    });\n                }\n                self.ftpfile_list.update(data);\n            }\n        });\n    },\n\n    /** Return/Set currently selected ftp datasets */\n    value: function(val) {\n        return this.ftpfile_list.value(val);\n    }\n});\n\nexport default {\n    View: View\n};\n"]}