{"version":3,"sources":["mvc/ui/ui-select-genomespace.js"],"names":["View","Backbone","extend","initialize","options","self","browse_button","ButtonIcon","title","icon","tooltip","onclick","browseGenomeSpace","filename_textbox","Input","setElement","_template","$","append","$el","openFileBrowser","successCallback","data","value","destination","new_value","undefined","_setValue","_getValue","onchange"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAKA;;;AAGA,QAAIA,OAAOC,SAASD,IAAT,CAAcE,MAAd,CAAqB;AAC5B;AACAC,oBAAY,oBAASC,OAAT,EAAkB;AAC1B;AACA,gBAAIC,OAAO,IAAX;AACA,iBAAKD,OAAL,GAAeA,OAAf;;AAEA;AACA,iBAAKE,aAAL,GAAqB,IAAI,iBAAGC,UAAP,CAAkB;AACnCC,uBAAO,4BAAG,QAAH,CAD4B;AAEnCC,sBAAM,eAF6B;AAGnCC,yBAAS,4BAAG,oBAAH,CAH0B;AAInCC,yBAAS,mBAAW;AAChBN,yBAAKO,iBAAL,CAAuBR,OAAvB;AACH;AANkC,aAAlB,CAArB;;AASA;AACA,iBAAKS,gBAAL,GAAwB,IAAI,iBAAGC,KAAP,EAAxB;;AAEA;AACA,iBAAKC,UAAL,CAAgB,KAAKC,SAAL,CAAeZ,OAAf,CAAhB;AACA,iBAAKa,CAAL,CAAO,sBAAP,EAA+BC,MAA/B,CAAsC,KAAKZ,aAAL,CAAmBa,GAAzD;AACA,iBAAKF,CAAL,CAAO,yBAAP,EAAkCC,MAAlC,CAAyC,KAAKL,gBAAL,CAAsBM,GAA/D;AACH,SAxB2B;;AA0B5B;AACAP,2BAAmB,2BAASR,OAAT,EAAkB;AACjC,gBAAIC,OAAO,IAAX;AACA,sCAAmBe,eAAnB,CAAmC;AAC/BC,iCAAiB,yBAASC,IAAT,EAAe;AAC5BjB,yBAAKkB,KAAL,CAAWD,KAAKE,WAAhB;AACH;AAH8B,aAAnC;AAKH,SAlC2B;;AAoC5B;AACAR,mBAAW,mBAASZ,OAAT,EAAkB;AACzB,mBACI,oCACA,kCADA,GAEA,sCAFA,GAGA,yCAHA,GAIA,QAJA,GAKA,QANJ;AAQH,SA9C2B;;AAgD5B;AACAmB,eAAO,eAASE,SAAT,EAAoB;AACvB;AACA,gBAAIA,cAAcC,SAAlB,EAA6B;AACzB,qBAAKC,SAAL,CAAeF,SAAf;AACH,aAFD,MAEO;AACH,uBAAO,KAAKG,SAAL,EAAP;AACH;AACJ,SAxD2B;;AA0D5B;AACAA,mBAAW,qBAAW;AAClB,mBAAO,KAAKf,gBAAL,CAAsBU,KAAtB,EAAP;AACH,SA7D2B;;AA+D5B;AACAI,mBAAW,mBAASF,SAAT,EAAoB;AAC3B,gBAAIA,SAAJ,EAAe;AACX,qBAAKZ,gBAAL,CAAsBU,KAAtB,CAA4BE,SAA5B;AACH;AACD,iBAAKrB,OAAL,CAAayB,QAAb,IAAyB,KAAKzB,OAAL,CAAayB,QAAb,CAAsBJ,SAAtB,CAAzB;AACH;AArE2B,KAArB,CAAX;AAPA;sBA+Ee;AACXzB,cAAMA;AADK,K","file":"../../../scripts/mvc/ui/ui-select-genomespace.js","sourcesContent":["import _l from \"utils/localization\";\n// dependencies\nimport Utils from \"utils/utils\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport GenomespaceBrowser from \"mvc/tool/tool-genomespace\";\n/**\n * GenomeSpace file selector\n */\nvar View = Backbone.View.extend({\n    // initialize\n    initialize: function(options) {\n        // link this\n        var self = this;\n        this.options = options;\n\n        // create insert new list element button\n        this.browse_button = new Ui.ButtonIcon({\n            title: _l(\"Browse\"),\n            icon: \"fa fa-sign-in\",\n            tooltip: _l(\"Browse GenomeSpace\"),\n            onclick: function() {\n                self.browseGenomeSpace(options);\n            }\n        });\n\n        // create genomespace filepath textbox\n        this.filename_textbox = new Ui.Input();\n\n        // create elements\n        this.setElement(this._template(options));\n        this.$(\".ui-gs-browse-button\").append(this.browse_button.$el);\n        this.$(\".ui-gs-filename-textbox\").append(this.filename_textbox.$el);\n    },\n\n    /** Browse GenomeSpace */\n    browseGenomeSpace: function(options) {\n        var self = this;\n        GenomespaceBrowser.openFileBrowser({\n            successCallback: function(data) {\n                self.value(data.destination);\n            }\n        });\n    },\n\n    /** Main Template */\n    _template: function(options) {\n        return (\n            '<div class=\"ui-gs-select-file\">' +\n            '<div class=\"ui-gs-browse-field\">' +\n            '<span class=\"ui-gs-browse-button\" />' +\n            '<span class=\"ui-gs-filename-textbox\" />' +\n            \"</div>\" +\n            \"</div>\"\n        );\n    },\n\n    /** Return/Set currently selected genomespace filename */\n    value: function(new_value) {\n        // check if new_value is defined\n        if (new_value !== undefined) {\n            this._setValue(new_value);\n        } else {\n            return this._getValue();\n        }\n    },\n\n    // get value\n    _getValue: function() {\n        return this.filename_textbox.value();\n    },\n\n    // set value\n    _setValue: function(new_value) {\n        if (new_value) {\n            this.filename_textbox.value(new_value);\n        }\n        this.options.onchange && this.options.onchange(new_value);\n    }\n});\n\nexport default {\n    View: View\n};\n"]}