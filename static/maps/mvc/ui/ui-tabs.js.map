{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["View","Backbone","extend","initialize","options","collection","Collection","model","Model","onchange","visible","set","setElement","$","_template","$nav","$content","$el","on","hide","render","listenTo","_add","_remove","_change","_reset","id","get","length","first","children","removeClass","addClass","size","current","show","add","del","remove","delAll","reset","showTab","hideTab","tab_model","self","attributes","append","attr","_template_tab","tooltip","title","placement","container","e","preventDefault","empty","$tmpl","$href","find","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\nexport var View = Backbone.View.extend({\n    initialize: function(options) {\n        this.collection = new Backbone.Collection();\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                onchange: null,\n                visible: true\n            }).set(options);\n        this.setElement($(this._template()));\n        this.$nav = this.$(\".tab-navigation\");\n        this.$content = this.$(\".tab-content\");\n        this.$el.on(\"click\", () => {\n            $(\".tooltip\").hide();\n        });\n        this.render();\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.listenTo(this.collection, \"add\", this._add, this);\n        this.listenTo(this.collection, \"remove\", this._remove, this);\n        this.listenTo(this.collection, \"change\", this._change, this);\n        this.listenTo(this.collection, \"reset\", this._reset, this);\n        this.listenTo(this.collection, \"add remove reset\", this.render, this);\n    },\n\n    render: function() {\n        var id = this.model.get(\"current\");\n        id = this.$(`#${id}`).length > 0 ? id : this.first();\n        if (id) {\n            this.$nav.children().removeClass(\"active\");\n            this.$content.children().removeClass(\"active\");\n            this.$(`#tab-${id}`).addClass(\"active\");\n            this.$(`#${id}`).addClass(\"active\");\n        }\n        this.$el[this.model.get(\"visible\") ? \"fadeIn\" : \"fadeOut\"](\"fast\");\n        this.$nav[this.size() > 1 ? \"show\" : \"hide\"]();\n    },\n\n    /** Returns tab id for currently shown tab */\n    current: function() {\n        return this.model.get(\"current\");\n    },\n\n    /** Show tab view and highlight a tab by id */\n    show: function(id) {\n        if (id) {\n            this.model.set({ current: id, visible: true });\n            this.model.get(\"onchange\") && this.model.get(\"onchange\")(id);\n        }\n    },\n\n    /** Hide tab view */\n    hide: function() {\n        this.model.set(\"visible\", false);\n    },\n\n    /** Returns first tab */\n    first: function() {\n        var model = this.collection.first();\n        return model && model.id;\n    },\n\n    /** Returns current number of tabs */\n    size: function() {\n        return this.collection.length;\n    },\n\n    /** Adds a new tab */\n    add: function(options) {\n        this.collection.add(options);\n    },\n\n    /** Delete tab */\n    del: function(id) {\n        this.collection.remove(id);\n    },\n\n    /** Delete all tabs */\n    delAll: function() {\n        this.collection.reset();\n    },\n\n    /** Show tab */\n    showTab: function(id) {\n        this.collection.get(id).set(\"hidden\", false);\n    },\n\n    /** Hide tab */\n    hideTab: function(id) {\n        this.collection.get(id).set(\"hidden\", true);\n    },\n\n    /** Adds a new tab */\n    _add: function(tab_model) {\n        var self = this;\n        var options = tab_model.attributes;\n        this.$content.append(\n            $(\"<div/>\")\n                .attr(\"id\", options.id)\n                .addClass(\"tab-pane\")\n                .append(options.$el)\n        );\n        this.$nav.append(\n            $(this._template_tab(options))\n                .show()\n                .tooltip({\n                    title: options.tooltip,\n                    placement: \"bottom\",\n                    container: self.$el\n                })\n                .on(\"click\", e => {\n                    e.preventDefault();\n                    self.show(options.id);\n                })\n        );\n        if (this.size() == 1) {\n            this.show(options.id);\n        }\n    },\n\n    /** Delete tab */\n    _remove: function(tab_model) {\n        this.$(`#tab-${tab_model.id}`).remove();\n        this.$(`#${tab_model.id}`).remove();\n    },\n\n    /** Reset collection */\n    _reset: function() {\n        this.$nav.empty();\n        this.$content.empty();\n    },\n\n    /** Change tab */\n    _change: function(tab_model) {\n        this.$(`#tab-${tab_model.id}`)[tab_model.get(\"hidden\") ? \"hide\" : \"show\"]();\n    },\n\n    /** Main template */\n    _template: function() {\n        return $(\"<div/>\")\n            .addClass(\"ui-tabs tabbable tabs-left\")\n            .append($(\"<ul/>\").addClass(\"tab-navigation nav nav-tabs\"))\n            .append($(\"<div/>\").addClass(\"tab-content\"));\n    },\n\n    /** Tab template */\n    _template_tab: function(options) {\n        var $tmpl = $(\"<li/>\")\n            .addClass(\"tab-element\")\n            .attr(\"id\", `tab-${options.id}`)\n            .append($(\"<a/>\").attr(\"id\", `tab-title-link-${options.id}`));\n        var $href = $tmpl.find(\"a\");\n        options.icon &&\n            $href.append(\n                $(\"<i/>\")\n                    .addClass(\"tab-icon fa\")\n                    .addClass(options.icon)\n            );\n        $href.append(\n            $(\"<span/>\")\n                .attr(\"id\", `tab-title-text-${options.id}`)\n                .addClass(\"tab-title-text\")\n                .append(options.title)\n        );\n        return $tmpl;\n    }\n});\n\nexport default { View: View };\n"]}