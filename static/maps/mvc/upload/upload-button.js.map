{"version":3,"sources":["mvc/upload/upload-button.js"],"names":["View","Backbone","extend","initialize","options","self","model","Model","icon","tooltip","label","percentage","status","onunload","onclick","set","setElement","_template","$progress","$","listenTo","render","window","on","get","attributes","$el","off","e","title","placement","removeClass","addClass","css","width"],"mappings":";;;;;;;;;;;;;;;AACA;;AAEA,QAAIA,OAAOC,SAASD,IAAT,CAAcE,MAAd,CAAqB;AAC5BC,oBAAY,oBAASC,OAAT,EAAkB;AAC1B,gBAAIC,OAAO,IAAX;AACA,iBAAKC,KAAL,GACKF,WAAWA,QAAQE,KAApB,IACA,IAAIL,SAASM,KAAb,CAAmB;AACfC,sBAAM,WADS;AAEfC,yBAAS,4BAAG,6CAAH,CAFM;AAGfC,uBAAO,WAHQ;AAIfC,4BAAY,CAJG;AAKfC,wBAAQ,EALO;AAMfC,0BAAU,oBAAW,CAAE,CANR;AAOfC,yBAAS,mBAAW,CAAE;AAPP,aAAnB,EAQGC,GARH,CAQOX,OARP,CAFJ;AAWA,iBAAKY,UAAL,CAAgB,KAAKC,SAAL,EAAhB;AACA,iBAAKC,SAAL,GAAiB,KAAKC,CAAL,CAAO,eAAP,CAAjB;AACA,iBAAKC,QAAL,CAAc,KAAKd,KAAnB,EAA0B,QAA1B,EAAoC,KAAKe,MAAzC,EAAiD,IAAjD;AACA,iBAAKA,MAAL;AACAF,cAAEG,MAAF,EAAUC,EAAV,CAAa,cAAb,EAA6B;AAAA,uBAAMlB,KAAKC,KAAL,CAAWkB,GAAX,CAAe,UAAf,GAAN;AAAA,aAA7B;AACH,SAnB2B;;AAqB5BH,gBAAQ,kBAAW;AACf,gBAAIhB,OAAO,IAAX;AACA,gBAAID,UAAU,KAAKE,KAAL,CAAWmB,UAAzB;AACA,iBAAKC,GAAL,CACKC,GADL,CACS,OADT,EAEKJ,EAFL,CAEQ,OAFR,EAEiB,aAAK;AACdnB,wBAAQU,OAAR,CAAgBc,CAAhB;AACH,aAJL,EAKKnB,OALL,CAKa;AACLoB,uBAAO,KAAKvB,KAAL,CAAWkB,GAAX,CAAe,SAAf,CADF;AAELM,2BAAW;AAFN,aALb;AASA,iBAAKZ,SAAL,CACKa,WADL,GAEKC,QAFL,CAEc,cAFd,EAGKA,QAHL,CAGc,2BAHd,EAIKA,QAJL,CAIc5B,QAAQQ,MAAR,IAAkB,EAAlB,sBAAwCR,QAAQQ,MAJ9D,EAKKqB,GALL,CAKS,EAAEC,OAAU9B,QAAQO,UAAlB,MAAF,EALT;AAMH,SAvC2B;;AAyC5B;AACAM,mBAAW,qBAAW;AAClB,mBACI,gCACA,wBADA,GAEA,6BAFA,GAGA,yFAHA,GAIA,8BAJA,GAKA,MALA,GAMA,QANA,GAOA,QARJ;AAUH;AArD2B,KAArB,CAAX;sBAuDe,EAAEjB,MAAMA,IAAR,E","file":"../../../scripts/mvc/upload/upload-button.js","sourcesContent":["import _l from \"utils/localization\";\n/** View for upload/progress bar button */\n\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                icon: \"fa-upload\",\n                tooltip: _l(\"Download from URL or upload files from disk\"),\n                label: \"Load Data\",\n                percentage: 0,\n                status: \"\",\n                onunload: function() {},\n                onclick: function() {}\n            }).set(options);\n        this.setElement(this._template());\n        this.$progress = this.$(\".progress-bar\");\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n        $(window).on(\"beforeunload\", () => self.model.get(\"onunload\")());\n    },\n\n    render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.$el\n            .off(\"click\")\n            .on(\"click\", e => {\n                options.onclick(e);\n            })\n            .tooltip({\n                title: this.model.get(\"tooltip\"),\n                placement: \"bottom\"\n            });\n        this.$progress\n            .removeClass()\n            .addClass(\"progress-bar\")\n            .addClass(\"progress-bar-notransition\")\n            .addClass(options.status != \"\" && `progress-bar-${options.status}`)\n            .css({ width: `${options.percentage}%` });\n    },\n\n    /** Template */\n    _template: function() {\n        return (\n            '<div class=\"upload-button\">' +\n            '<div class=\"progress\">' +\n            '<div class=\"progress-bar\"/>' +\n            '<a class=\"panel-header-button\" href=\"javascript:void(0)\" id=\"tool-panel-upload-button\">' +\n            '<span class=\"fa fa-upload\"/>' +\n            \"</a>\" +\n            \"</div>\" +\n            \"</div>\"\n        );\n    }\n});\nexport default { View: View };\n"]}