{"version":3,"sources":["mvc/tool/tool-form-base.js"],"names":["extend","initialize","options","self","deferred","prototype","call","_update","model","get","parent","Galaxy","currHistoryPanel","listenTo","collection","$el","on","_destroy","callback","reset","execute","process","then","_render","off","hide","remove","emit","debug","attributes","set","title","fixed_title","name","description","version","operations","hide_operations","_operations","onchange","render","append","$","addClass","_footer","show_message","message","update","status","id","persistent","versions_button","ButtonMenu","icon","narrow","tooltip","sustain_version","versions","length","i","addMenu","onclick","replace","menu_button","biostar_url","window","open","prompt","location","origin","root","user","href","requirements","requirements_visible","portlet","collapsed","expand","_templateRequirements","sharable_url","load","type","webhooks","each","webhook","toJSON","activate","config","function","func","Function","menu","_templateHelp","citations","citationInstance","vm","document","createElement","propsData","source","$mount","$tmpl","help","find","attr","img_src","indexOf","nreq","requirements_message","_","req","requirements_link","text"],"mappings":"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","file":"../../../scripts/mvc/tool/tool-form-base.js","sourcesContent":["import _l from \"utils/localization\";\n/**\n    This is the base class of the tool form plugin. This class is e.g. inherited by the regular and the workflow tool form.\n*/\nimport Utils from \"utils/utils\";\nimport Deferred from \"utils/deferred\";\nimport Ui from \"mvc/ui/ui-misc\";\nimport FormBase from \"mvc/form/form-view\";\nimport Webhooks from \"mvc/webhooks\";\nimport Citations from \"components/Citations.vue\";\nimport Vue from \"vue\";\nexport default FormBase.extend({\n    initialize: function(options) {\n        var self = this;\n        this.deferred = new Deferred();\n        FormBase.prototype.initialize.call(this, options);\n\n        // optional model update\n        this._update(this.model.get(\"initialmodel\"));\n\n        // listen to history panel\n        if (this.model.get(\"listen_to_history\") && parent.Galaxy && parent.Galaxy.currHistoryPanel) {\n            this.listenTo(parent.Galaxy.currHistoryPanel.collection, \"change\", () => {\n                self.model.get(\"onchange\")();\n            });\n        }\n        // destroy dom elements\n        this.$el.on(\"remove\", () => {\n            self._destroy();\n        });\n    },\n\n    /** Allows tool form variation to update tool model */\n    _update: function(callback) {\n        var self = this;\n        callback = callback || this.model.get(\"buildmodel\");\n        if (callback) {\n            this.deferred.reset();\n            this.deferred.execute(process => {\n                callback(process, self);\n                process.then(() => {\n                    self._render();\n                });\n            });\n        } else {\n            this._render();\n        }\n    },\n\n    /** Wait for deferred build processes before removal */\n    _destroy: function() {\n        var self = this;\n        this.$el.off().hide();\n        this.deferred.execute(() => {\n            FormBase.prototype.remove.call(self);\n            Galaxy.emit.debug(\"tool-form-base::_destroy()\", \"Destroy view.\");\n        });\n    },\n\n    /** Build form */\n    _render: function() {\n        var self = this;\n        var options = this.model.attributes;\n        this.model.set({\n            title:\n                options.fixed_title ||\n                `<b>${options.name}</b> ${options.description} (Galaxy Version ${options.version})`,\n            operations: !options.hide_operations && this._operations(),\n            onchange: function() {\n                self.deferred.reset();\n                self.deferred.execute(process => {\n                    self.model.get(\"postchange\")(process, self);\n                });\n            }\n        });\n        this.render();\n        if (!this.model.get(\"collapsible\")) {\n            this.$el.append(\n                $(\"<div/>\")\n                    .addClass(\"ui-margin-top-large\")\n                    .append(this._footer())\n            );\n        }\n        this.show_message &&\n            this.message.update({\n                status: \"success\",\n                message: `Now you are using '${options.name}' version ${options.version}, id '${options.id}'.`,\n                persistent: false\n            });\n        this.show_message = true;\n    },\n\n    /** Create tool operation menu */\n    _operations: function() {\n        var self = this;\n        var options = this.model.attributes;\n\n        // button for version selection\n        var versions_button = new Ui.ButtonMenu({\n            icon: \"fa-cubes\",\n            title: (!options.narrow && \"Versions\") || null,\n            tooltip: \"Select another tool version\"\n        });\n        if (!options.sustain_version && options.versions && options.versions.length > 1) {\n            for (var i in options.versions) {\n                var version = options.versions[i];\n                if (version != options.version) {\n                    versions_button.addMenu({\n                        title: `Switch to ${version}`,\n                        version: version,\n                        icon: \"fa-cube\",\n                        onclick: function() {\n                            // here we update the tool version (some tools encode the version also in the id)\n                            self.model.set(\"id\", options.id.replace(options.version, this.version));\n                            self.model.set(\"version\", this.version);\n                            self._update();\n                        }\n                    });\n                }\n            }\n        } else {\n            versions_button.$el.hide();\n        }\n\n        // button for options e.g. search, help\n        var menu_button = new Ui.ButtonMenu({\n            id: \"options\",\n            icon: \"fa-caret-down\",\n            title: (!options.narrow && \"Options\") || null,\n            tooltip: \"View available options\"\n        });\n        if (options.biostar_url) {\n            menu_button.addMenu({\n                icon: \"fa-question-circle\",\n                title: \"Question?\",\n                onclick: function() {\n                    window.open(`${options.biostar_url}/p/new/post/`);\n                }\n            });\n            menu_button.addMenu({\n                icon: \"fa-search\",\n                title: _l(\"Search\"),\n                onclick: function() {\n                    window.open(`${options.biostar_url}/local/search/page/?q=${options.name}`);\n                }\n            });\n        }\n        menu_button.addMenu({\n            icon: \"fa-share\",\n            title: _l(\"Share\"),\n            onclick: function() {\n                prompt(\n                    \"Copy to clipboard: Ctrl+C, Enter\",\n                    `${window.location.origin + Galaxy.root}root?tool_id=${options.id}`\n                );\n            }\n        });\n\n        // add admin operations\n        if (Galaxy.user && Galaxy.user.get(\"is_admin\")) {\n            menu_button.addMenu({\n                icon: \"fa-download\",\n                title: _l(\"Download\"),\n                onclick: function() {\n                    window.location.href = `${Galaxy.root}api/tools/${options.id}/download`;\n                }\n            });\n        }\n\n        // button for version selection\n        if (options.requirements && options.requirements.length > 0) {\n            menu_button.addMenu({\n                icon: \"fa-info-circle\",\n                title: _l(\"Requirements\"),\n                onclick: function() {\n                    if (!this.requirements_visible || self.portlet.collapsed) {\n                        this.requirements_visible = true;\n                        self.portlet.expand();\n                        self.message.update({\n                            persistent: true,\n                            message: self._templateRequirements(options),\n                            status: \"info\"\n                        });\n                    } else {\n                        this.requirements_visible = false;\n                        self.message.update({ message: \"\" });\n                    }\n                }\n            });\n        }\n\n        // add toolshed url\n        if (options.sharable_url) {\n            menu_button.addMenu({\n                icon: \"fa-external-link\",\n                title: _l(\"See in Tool Shed\"),\n                onclick: function() {\n                    window.open(options.sharable_url);\n                }\n            });\n        }\n\n        // add tool menu webhooks\n        Webhooks.load({\n            type: \"tool-menu\",\n            callback: function(webhooks) {\n                webhooks.each(model => {\n                    var webhook = model.toJSON();\n                    if (webhook.activate && webhook.config.function) {\n                        menu_button.addMenu({\n                            icon: webhook.config.icon,\n                            title: webhook.config.title,\n                            onclick: function() {\n                                var func = new Function(\"options\", webhook.config.function);\n                                func(options);\n                            }\n                        });\n                    }\n                });\n            }\n        });\n\n        return {\n            menu: menu_button,\n            versions: versions_button\n        };\n    },\n\n    /** Create footer */\n    _footer: function() {\n        var options = this.model.attributes;\n        var $el = $(\"<div/>\").append(this._templateHelp(options));\n        if (options.citations) {\n            var citationInstance = Vue.extend(Citations);\n            var vm = document.createElement(\"div\");\n            $el.append(vm);\n            new citationInstance({\n                propsData: {\n                    id: options.id,\n                    source: \"tools\"\n                }\n            }).$mount(vm);\n        }\n        return $el;\n    },\n\n    /** Templates */\n    _templateHelp: function(options) {\n        var $tmpl = $(\"<div/>\")\n            .addClass(\"ui-form-help\")\n            .append(options.help);\n        $tmpl.find(\"a\").attr(\"target\", \"_blank\");\n        $tmpl.find(\"img\").each(function() {\n            var img_src = $(this).attr(\"src\");\n            if (img_src.indexOf(\"admin_toolshed\") !== -1) {\n                $(this).attr(\"src\", Galaxy.root + img_src);\n            }\n        });\n        return $tmpl;\n    },\n\n    _templateRequirements: function(options) {\n        var nreq = options.requirements.length;\n        if (nreq > 0) {\n            var requirements_message = \"This tool requires \";\n            _.each(options.requirements, (req, i) => {\n                requirements_message +=\n                    req.name +\n                    (req.version ? ` (Version ${req.version})` : \"\") +\n                    (i < nreq - 2 ? \", \" : i == nreq - 2 ? \" and \" : \"\");\n            });\n            var requirements_link = $(\"<a/>\")\n                .attr(\"target\", \"_blank\")\n                .attr(\"href\", \"https://galaxyproject.org/tools/requirements/\")\n                .text(\"here\");\n            return $(\"<span/>\")\n                .append(`${requirements_message}. Click `)\n                .append(requirements_link)\n                .append(\" for more information.\");\n        }\n        return \"No requirements found.\";\n    }\n});\n"]}