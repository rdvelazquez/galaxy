{"version":3,"sources":["ui/loading-indicator.js"],"names":["$","LoadingIndicator","$where","options","self","extend","cover","render","html","join","$indicator","hide","css","position","$text","children","top","bottom","left","right","opacity","margin","color","show","msg","speed","callback","parent","find","remove","insertBefore","message","fadeIn","text","length","fadeOut","markViewAsLoading","view","setElement"],"mappings":"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","file":"../../scripts/ui/loading-indicator.js","sourcesContent":["import jQuery from \"jquery\";\n(\"use_strict\");\n\nvar $ = jQuery;\n//TODO: too specific to history panel\nfunction LoadingIndicator($where, options) {\n    var self = this;\n    // defaults\n    options = jQuery.extend(\n        {\n            cover: false\n        },\n        options || {}\n    );\n\n    function render() {\n        var html = [\n            '<div class=\"loading-indicator\">',\n            '<div class=\"loading-indicator-text\">',\n            '<span class=\"fa fa-spinner fa-spin fa-lg\"></span>',\n            '<span class=\"loading-indicator-message\">loading...</span>',\n            \"</div>\",\n            \"</div>\"\n        ].join(\"\\n\");\n\n        var $indicator = $(html)\n            .hide()\n            .css(\n                options.css || {\n                    position: \"fixed\"\n                }\n            );\n\n        var $text = $indicator.children(\".loading-indicator-text\");\n\n        if (options.cover) {\n            $indicator.css({\n                \"z-index\": 2,\n                top: $where.css(\"top\"),\n                bottom: $where.css(\"bottom\"),\n                left: $where.css(\"left\"),\n                right: $where.css(\"right\"),\n                opacity: 0.5,\n                \"background-color\": \"white\",\n                \"text-align\": \"center\"\n            });\n            $text = $indicator.children(\".loading-indicator-text\").css({\n                \"margin-top\": \"20px\"\n            });\n        } else {\n            $text = $indicator.children(\".loading-indicator-text\").css({\n                margin: \"12px 0px 0px 10px\",\n                opacity: \"0.85\",\n                color: \"grey\"\n            });\n            $text.children(\".loading-indicator-message\").css({\n                margin: \"0px 8px 0px 0px\",\n                \"font-style\": \"italic\"\n            });\n        }\n        return $indicator;\n    }\n\n    self.show = (msg, speed, callback) => {\n        msg = msg || \"loading...\";\n        speed = speed || \"fast\";\n        // remove previous\n        $where\n            .parent()\n            .find(\".loading-indicator\")\n            .remove();\n        // since position is fixed - we insert as sibling\n        self.$indicator = render().insertBefore($where);\n        self.message(msg);\n        self.$indicator.fadeIn(speed, callback);\n        return self;\n    };\n\n    self.message = msg => {\n        self.$indicator.find(\"i\").text(msg);\n    };\n\n    self.hide = (speed, callback) => {\n        speed = speed || \"fast\";\n        if (self.$indicator && self.$indicator.length) {\n            self.$indicator.fadeOut(speed, () => {\n                self.$indicator.remove();\n                if (callback) {\n                    callback();\n                }\n            });\n        } else {\n            if (callback) {\n                callback();\n            }\n        }\n        return self;\n    };\n    return self;\n}\n\nconst markViewAsLoading = function(view) {\n    view.setElement($('<div><div class=\"loading\"></div></div>'));\n    new LoadingIndicator(view.$(\".loading\")).show();\n};\n\n//============================================================================\nexport default {\n    LoadingIndicator: LoadingIndicator,\n    markViewAsLoading: markViewAsLoading\n};\n"]}