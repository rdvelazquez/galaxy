{"version":3,"sources":["toolshed/groups/group-detail-view.js"],"names":["mod_toastr","GroupDetailView","Backbone","View","extend","el","options","app","initialize","_","window","globalTS","groups","collection","model","get","group_id","render","fetchGroup","that","Group","id","fetch","success","console","log","error","response","responseJSON","err_msg","template","templateRow","$el","html","group","$","tooltip","css","join"],"mappings":"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","file":"../../../scripts/toolshed/groups/group-detail-view.js","sourcesContent":["import * as mod_toastr from \"libs/toastr\";\nimport mod_group_model from \"toolshed/groups/group-model\";\n\n// toolshed group detail view\nconst GroupDetailView = Backbone.View.extend({\n    el: \"#groups_element\",\n    options: {},\n    app: null,\n\n    initialize: function(options) {\n        this.options = _.extend(this.options, options);\n        this.app = window.globalTS.groups;\n\n        if (this.app.collection !== null) {\n            this.model = this.app.collection.get(this.options.group_id);\n            this.render();\n        } else {\n            this.fetchGroup();\n        }\n    },\n\n    fetchGroup: function(options) {\n        const that = this;\n        this.options = _.extend(this.options, options);\n        this.model = new mod_group_model.Group({ id: this.options.group_id });\n        this.model.fetch({\n            success: function(model) {\n                console.log(\"received data: \");\n                console.log(model);\n                that.render();\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occurred.\");\n                }\n            }\n        });\n    },\n\n    render: function() {\n        const template = this.templateRow();\n        this.$el.html(template({ group: this.model }));\n        $(\"#center [data-toggle]\").tooltip();\n        $(\"#center\").css(\"overflow\", \"auto\");\n    },\n\n    templateRow: function() {\n        return _.template(\n            [\n                \"<div>\",\n                '<h3><%= _.escape(group.get(\"name\")) %></h3>',\n                '<p class=\"\" style=\"color:gray;\">',\n                'A group of <%= group.get(\"members\").length %> members with <%= group.get(\"repositories\").length %> repositories and a total of <%= group.get(\"total_downloads\") %> combined repository clones.</p>',\n\n                \"<h3>Members</h3>\",\n                '<table class=\"grid table table-condensed\">',\n                \"<thead>\",\n                \"<th>Name</th>\",\n                \"<th>Repositories</th>\",\n                \"<th>Registered</th>\",\n                \"</thead>\",\n                \"<tbody>\",\n                '<% _.each(group.get(\"members\"), function(member) { %>',\n                \"<tr>\",\n                \"<td>\",\n                \"<%= _.escape(member.username) %>\",\n                \"</td>\",\n                \"<td>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Repositories of <%= _.escape(member.username) %>\" href=\"/repository/browse_repositories_by_user?user_id=<%= member.id %>&use_panels=true\" id=\"<%= member.id %>\"><%= member.user_repos_count %></a>',\n                \"</td>\",\n                \"<td>\",\n                \"<%= member.time_created %>\",\n                \"</td>\",\n                \"</tr>\",\n                \"<% }); %>\",\n                \"</tbody>\",\n                \"</table>\",\n\n                \"<h3>Repositories</h3>\",\n                '<table class=\"grid table table-condensed\">',\n                \"<thead>\",\n                \"<th>Name</th>\",\n                \"<th>Description</th>\",\n                \"<th>Clones</th>\",\n                \"<th>Owner</th>\",\n                \"<th>Categories</th>\",\n                \"<th>Created</th>\",\n                \"<th>Updated</th>\",\n                \"<th>Rating</th>\",\n                \"<th>Verified</th>\",\n                \"</thead>\",\n                \"<tbody>\",\n                '<% _.each(group.get(\"repositories\"), function(repo) { %>',\n                \"<tr>\",\n                \"<td>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Details of <%= _.escape(repo.name) %>\" href=\"/view/<%= _.escape(repo.owner) %>/<%= _escape(repo.name) %>\" id=\"<%= repo.id %>\"><%= _.escape(repo.name) %></a>',\n                \"</td>\",\n                \"<td>\",\n                \"<%= _.escape(repo.description) %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.times_downloaded %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= _.escape(repo.owner) %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<% _.each((repo.categories), function(cat) { %>\",\n                '<a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Repositories in <%= cat.name %>\" href=\"/repository/browse_repositories_in_category?id=<%= cat.id %>&use_panels=true\"><%= cat.name %></a><br/>',\n                // '<%= repo.categories %>',\n                \"<% }); %>\",\n                \"</td>\",\n                '<td data-toggle=\"tooltip\" data-placement=\"top\" title=\"<%= repo.time_created_full %>\">',\n                \"<%= repo.time_created %>\",\n                \"</td>\",\n                '<td data-toggle=\"tooltip\" data-placement=\"top\" title=\"<%= repo.time_updated_full %>\">',\n                \"<%= repo.time_updated %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.ratings_mean %>\",\n                \"</td>\",\n                \"<td>\",\n                \"<%= repo.approved %>\",\n                \"</td>\",\n                \"</tr>\",\n                \"<% }); %>\",\n                \"</tbody>\",\n                \"</table>\",\n                \"</div>\"\n            ].join(\"\")\n        );\n    }\n});\nexport default {\n    GroupDetailView: GroupDetailView\n};\n"]}